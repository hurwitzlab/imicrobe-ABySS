Bootstrap: docker
From: ubuntu:latest

%runscript
    echo "Hello!"

%post
    apt update
    apt install -y wget build-essential autoconf libboost-all-dev libsparsehash-dev

    # Install ABySS from source
    cd /
    wget https://github.com/bcgsc/abyss/archive/2.0.2.tar.gz
    tar -xf 2.0.2.tar.gz
    cd abyss-2.0.2
    ./autogen.sh
    ./configure
    make
    make install

    # Add environment variables to /environment file
    echo "\nexport PATH=/abyss-2.0.2:\$PATH" >> /environment

    # Create mount points for TACC directories
    mkdir /home1
    mkdir /scratch
    mkdir /work

%test
    . /environment
    echo "PATH=${PATH}"

    abyss-pe --version
